/*! For license information please see 3e235be0118cc621caf8.worker.js.LICENSE.txt */
!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/Artist/",r(r.s=12)}([function(t,e,r){t.exports=r(5)},function(t,e,r){"use strict";(function(e){var n=r(6);function i(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function o(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=r(7),u=Object.prototype.hasOwnProperty,c=Array.prototype.slice,f="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function s(t){return!o(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=m,p=/\s*function\s+([^\(\s]*)\s*/;function y(t){if(a.isFunction(t)){if(f)return t.name;var e=t.toString().match(p);return e&&e[1]}}function g(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function v(t){if(f||!a.isFunction(t))return a.inspect(t);var e=y(t);return"[Function"+(e?": "+e:"")+"]"}function d(t,e,r,n,i){throw new h.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function m(t,e){t||d(t,!0,e,"==",h.ok)}function b(t,e,r,n){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(s(t)&&s(e)&&l(t)===l(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var u=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=w(t),o=w(e);if(i&&!o||!i&&o)return!1;if(i)return b(t=c.call(t),e=c.call(e),r);var u,f,l=E(t),s=E(e);if(l.length!==s.length)return!1;for(l.sort(),s.sort(),f=l.length-1;f>=0;f--)if(l[f]!==s[f])return!1;for(f=l.length-1;f>=0;f--)if(!b(t[u=l[f]],e[u],r,n))return!1;return!0}(t,e,r,n))}return r?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function O(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,r,n){var i;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(r){e=r}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&d(i,r,"Missing expected exception"+n);var o="string"===typeof n,u=!t&&i&&!r;if((!t&&a.isError(i)&&o&&O(i,r)||u)&&d(i,r,"Got unwanted exception"+n),t&&i&&r&&!O(i,r)||!t&&i)throw i}h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return g(v(t.actual),128)+" "+t.operator+" "+g(v(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=y(e),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},a.inherits(h.AssertionError,Error),h.fail=d,h.ok=m,h.equal=function(t,e,r){t!=e&&d(t,e,r,"==",h.equal)},h.notEqual=function(t,e,r){t==e&&d(t,e,r,"!=",h.notEqual)},h.deepEqual=function(t,e,r){b(t,e,!1)||d(t,e,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,r){b(t,e,!0)||d(t,e,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,r){b(t,e,!1)&&d(t,e,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,r,n){b(e,r,!0)&&d(e,r,n,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,r){t!==e&&d(t,e,r,"===",h.strictEqual)},h.notStrictEqual=function(t,e,r){t===e&&d(t,e,r,"!==",h.notStrictEqual)},h.throws=function(t,e,r){x(!0,t,e,r)},h.doesNotThrow=function(t,e,r){x(!1,t,e,r)},h.ifError=function(t){if(t)throw t},h.strict=n((function t(e,r){e||d(e,!0,r,"==",t)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var E=Object.keys||function(t){var e=[];for(var r in t)u.call(t,r)&&e.push(r);return e}}).call(this,r(3))},function(t,e,r){"use strict";(function(t,n){var i,o=r(4);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:n;var a=Object(o.a)(i);e.a=a}).call(this,r(3),r(11)(t))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t){var e,r=t.Symbol;return"function"===typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}r.d(e,"a",(function(){return n}))},function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(M){c=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new A(n||[]);return o._invoke=function(t,e,r){var n=s;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===i)throw o;return T()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=P(a,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===s)throw n=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=l(t,e,r);if("normal"===c.type){if(n=r.done?y:h,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=y,r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(M){return{type:"throw",arg:M}}}t.wrap=f;var s="suspendedStart",h="suspendedYield",p="executing",y="completed",g={};function v(){}function d(){}function m(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==r&&n.call(O,o)&&(b=O);var x=m.prototype=v.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,o,a,u){var c=l(t[i],t,o);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"===typeof s&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function P(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(t){if(t){var r=t[o];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:T}}function T(){return{value:e,done:!0}}return d.prototype=x.constructor=m,m.constructor=d,d.displayName=c(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new S(f(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(x),c(x,u,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return u.type="throw",u.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),f=n.call(a,"finallyLoc");if(c&&f){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var r,u,c=a(t),f=1;f<arguments.length;f++){for(var l in r=Object(arguments[f]))i.call(r,l)&&(c[l]=r[l]);if(n){u=n(r);for(var s=0;s<u.length;s++)o.call(r,u[s])&&(c[u[s]]=r[u[s]])}}return c}},function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},i=/%[sdj%]/g;e.format=function(t){if(!d(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(u(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}})),c=n[r];r<o;c=n[++r])g(c)||!w(c)?a+=" "+c:a+=" "+u(c);return a},e.deprecate=function(r,n){if("undefined"!==typeof t&&!0===t.noDeprecation)return r;if("undefined"===typeof t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,a={};function u(t,r){var n={seen:[],stylize:f};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&e._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),l(n,t,n.depth)}function c(t,e){var r=u.styles[e];return r?"\x1b["+u.colors[r][0]+"m"+t+"\x1b["+u.colors[r][1]+"m":t}function f(t,e){return t}function l(t,r,n){if(t.customInspect&&r&&E(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return d(i)||(i=l(t,i,n)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(d(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(v(e))return t.stylize(""+e,"number");if(y(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,r);if(o)return o;var a=Object.keys(r),u=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),x(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return s(r);if(0===a.length){if(E(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(O(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return s(r)}var f,w="",S=!1,P=["{","}"];(p(r)&&(S=!0,P=["[","]"]),E(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(w=" "+RegExp.prototype.toString.call(r)),O(r)&&(w=" "+Date.prototype.toUTCString.call(r)),x(r)&&(w=" "+s(r)),0!==a.length||S&&0!=r.length?n<0?b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),f=S?function(t,e,r,n,i){for(var o=[],a=0,u=e.length;a<u;++a)A(e,String(a))?o.push(h(t,e,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))})),o}(t,r,n,u,a):a.map((function(e){return h(t,r,n,u,e,S)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(f,w,P)):P[0]+w+P[1]}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i,o){var a,u,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),A(n,i)||(a="["+i+"]"),u||(t.seen.indexOf(c.value)<0?(u=g(r)?l(t,c.value,null):l(t,c.value,r-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+u.split("\n").map((function(t){return"   "+t})).join("\n")):u=t.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function p(t){return Array.isArray(t)}function y(t){return"boolean"===typeof t}function g(t){return null===t}function v(t){return"number"===typeof t}function d(t){return"string"===typeof t}function m(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===S(t)}function w(t){return"object"===typeof t&&null!==t}function O(t){return w(t)&&"[object Date]"===S(t)}function x(t){return w(t)&&("[object Error]"===S(t)||t instanceof Error)}function E(t){return"function"===typeof t}function S(t){return Object.prototype.toString.call(t)}function P(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(m(o)&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"/Artist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else a[r]=function(){};return a[r]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=y,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=d,e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=w,e.isDate=O,e.isError=x,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=r(9);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),j[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",k(),e.format.apply(e,arguments))},e.inherits=r(10),e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var I="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(I&&t[I]){var e;if("function"!==typeof(e=t[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(a){r(a)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),I&&Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=I,e.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(T,e,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(8))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var c,f=[],l=!1,s=-1;function h(){l&&c&&(l=!1,c.length?f=c.concat(f):s=-1,f.length&&p())}function p(){if(!l){var t=u(h);l=!0;for(var e=f.length;e;){for(c=f,f=[];++s<e;)c&&c[s].run();s=-1,e=f.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new y(t,e)),1!==f.length||l||u(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e,r){return(f=c()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&u(i,r.prototype),i}).apply(null,arguments)}function l(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.r(e),r.d(e,"default",(function(){return de}));var s=Symbol("Comlink.proxy"),h=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),y=Symbol("Comlink.thrown"),g=function(t){return"object"===typeof t&&null!==t||"function"===typeof t},v=new Map([["proxy",{canHandle:function(t){return g(t)&&t[s]},serialize:function(t){var e=new MessageChannel,r=e.port1,n=e.port2;return d(t,r),[n,[n]]},deserialize:function(t){return t.start(),w(t,[],e);var e}}],["throw",{canHandle:function(t){return g(t)&&y in t},serialize:function(t){var e=t.value;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize:function(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;e.addEventListener("message",(function r(n){if(n&&n.data){var i,u=Object.assign({path:[]},n.data),c=u.id,s=u.type,h=u.path,p=(n.data.argumentList||[]).map(j);try{var g=h.slice(0,-1).reduce((function(t,e){return t[e]}),t),v=h.reduce((function(t,e){return t[e]}),t);switch(s){case 0:i=v;break;case 1:g[h.slice(-1)[0]]=j(n.data.value),i=!0;break;case 2:i=v.apply(g,p);break;case 3:var b;i=S(f(v,l(p)));break;case 4:var w=new MessageChannel,O=w.port1,x=w.port2;d(t,x),i=E(O,[O]);break;case 5:i=void 0}}catch(b){i=a({value:b},y,0)}Promise.resolve(i).catch((function(t){return a({value:t},y,0)})).then((function(t){var n=o(P(t),2),i=n[0],a=n[1];e.postMessage(Object.assign(Object.assign({},i),{id:c}),a),5===s&&(e.removeEventListener("message",r),m(e))}))}})),e.start&&e.start()}function m(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function b(t){if(t)throw new Error("Proxy has been released and is not useable")}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=!1,i=new Proxy(r,{get:function(r,o){if(b(n),o===p)return function(){return k(t,{type:5,path:e.map((function(t){return t.toString()}))}).then((function(){m(t),n=!0}))};if("then"===o){if(0===e.length)return{then:function(){return i}};var a=k(t,{type:0,path:e.map((function(t){return t.toString()}))}).then(j);return a.then.bind(a)}return w(t,[].concat(l(e),[o]))},set:function(r,i,a){b(n);var u=o(P(a),2),c=u[0],f=u[1];return k(t,{type:1,path:[].concat(l(e),[i]).map((function(t){return t.toString()})),value:c},f).then(j)},apply:function(r,i,a){b(n);var u=e[e.length-1];if(u===h)return k(t,{type:4}).then(j);if("bind"===u)return w(t,e.slice(0,-1));var c=o(O(a),2),f=c[0],l=c[1];return k(t,{type:2,path:e.map((function(t){return t.toString()})),argumentList:f},l).then(j)},construct:function(r,i){b(n);var a=o(O(i),2),u=a[0],c=a[1];return k(t,{type:3,path:e.map((function(t){return t.toString()})),argumentList:u},c).then(j)}});return i}function O(t){var e,r=t.map(P);return[r.map((function(t){return t[0]})),(e=r.map((function(t){return t[1]})),Array.prototype.concat.apply([],e))]}var x=new WeakMap;function E(t,e){return x.set(t,e),t}function S(t){return Object.assign(t,a({},s,!0))}function P(t){var e,r=function(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=i(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}(v);try{for(r.s();!(e=r.n()).done;){var n=o(e.value,2),a=n[0],u=n[1];if(u.canHandle(t)){var c=o(u.serialize(t),2);return[{type:3,name:a,value:c[0]},c[1]]}}}catch(f){r.e(f)}finally{r.f()}return[{type:0,value:t},x.get(t)||[]]}function j(t){switch(t.type){case 3:return v.get(t.name).deserialize(t.value);case 0:return t.value}}function k(t,e,r){return new Promise((function(n){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");t.addEventListener("message",(function e(r){r.data&&r.data.id&&r.data.id===i&&(t.removeEventListener("message",e),n(r.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),r)}))}var A=r(0),I=r.n(A);function T(t,e,r,n,i,o,a){try{var u=t[o](a),c=u.value}catch(f){return void r(f)}u.done?e(c):Promise.resolve(c).then(n,i)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){T(o,n,i,a,u,"next",t)}function u(t){T(o,n,i,a,u,"throw",t)}a(void 0)}))}}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function D(t,e,r){return e&&R(t.prototype,e),r&&R(t,r),t}function L(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t){return(q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){return!e||"object"!==q(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){var e=c();return function(){var r,n=F(t);if(e){var i=F(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return z(this,r)}}var U=function(){function t(){_(this,t)}return D(t,null,[{key:"Uint8",value:function(t,e){return new C(Uint8Array.BYTES_PER_ELEMENT,Uint8Array,t,e)}},{key:"Uint16",value:function(t,e){return new C(Uint16Array.BYTES_PER_ELEMENT,Uint16Array,t,e)}},{key:"Float32",value:function(t,e){return new C(Float32Array.BYTES_PER_ELEMENT,Float32Array,t,e)}},{key:"Image",value:function(e,r,n){switch(e){case"Uint8":return t.Uint8(r,n);case"Uint16":return t.Uint16(r,n);case"Float32":return t.Float32(r,n)}}}]),t}(),C=function(){function t(e,r,n,i){_(this,t),this.buffer=void 0,this.pixels=void 0;var o=n*i,a=new ArrayBuffer(o*e);this.pixels=Array.from(Array(i),(function(t,i){return new r(a,n*e*i,n)})),this.buffer=new r(a,0,o)}return D(t,[{key:"get",value:function(t,e){if(!this.checkBoundary(t,e))throw new Error("Invalid image coordinates queried: image size ".concat(this.width,"x").concat(this.height," pixel ").concat(t,",").concat(e));return this.pixels[e][t]}},{key:"maxValue",value:function(){return this.buffer.reduce((function(t,e,r){return Math.max(e,t)}),this.buffer[0])}},{key:"minValue",value:function(){return this.buffer.reduce((function(t,e,r){return Math.min(e,t)}),this.buffer[0])}},{key:"getRow",value:function(t){if(t<0||t>this.height)throw new Error("Invalid y coordinate queried : image height ".concat(this.height," y ").concat(t));return this.pixels[t]}},{key:"set",value:function(t,e,r){if(!this.checkBoundary(t,e))throw new Error("Invalid image coordinates set: image size ".concat(this.width,"x").concat(this.height," pixel ").concat(t,",").concat(e));this.pixels[e][t]=r}},{key:"convertTo",value:function(t,e,r){var n=this,i=U.Image(t,this.width,this.height),o=i.imagePixels;return null!=e&&null!=r?o.forEach((function(t,i){return o[i]=e*n.buffer[i]+r})):o.forEach((function(t,e){return o[e]=n.buffer[e]})),i}},{key:"checkBoundary",value:function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height}},{key:"imageType",get:function(){return this.pixels[0].constructor.name.replace("Array","")}},{key:"imagePixels",get:function(){return this.buffer}},{key:"imageBuffer",get:function(){return this.buffer.buffer}},{key:"height",get:function(){return this.pixels.length}},{key:"width",get:function(){return this.pixels[0].length}}]),t}(),B=r(1),V=function(){function t(){_(this,t)}return D(t,null,[{key:"toSeq",value:function(t){for(var e=t.width,r=t.height,n=t.getContext("2d").getImageData(0,0,e,r),i={width:e,height:r,data:new Uint8Array(e*r*3)},o=0,a=0,u=0;u<e*r;u++)i.data[a++]=n.data[o++],i.data[a++]=n.data[o++],i.data[a++]=n.data[o++],o++;return i}},{key:"fromSeq",value:function(t,e){if(t.width*t.height*3!==t.data.length)throw Error("Invalid SeqCanvas, with ".concat(t.width,", height ").concat(t.height," and length ").concat(t.data.length));e.width=t.width,e.height=t.height;var r=e.getContext("2d");if(r){for(var n=r.getImageData(0,0,t.width,t.height),i=0,o=0,a=0;a<t.width*t.height;a++)n.data[i++]=t.data[o++],n.data[i++]=t.data[o++],n.data[i++]=t.data[o++],n.data[i++]=255;r.putImageData(n,0,0)}}},{key:"toRGB",value:function(t){for(var e=t.width,r=t.height,n=U.Uint8(e,r),i=U.Uint8(e,r),o=U.Uint8(e,r),a=e*r,u=0,c=t.data,f=n.imagePixels,l=i.imagePixels,s=o.imagePixels,h=0;h<a;h++)f[h]=c[u++],l[h]=c[u++],s[h]=c[u++];return[n,i,o]}},{key:"fromRGB",value:function(t,e,r){for(var n=t.width,i=t.height,o={width:n,height:i,data:new Uint8Array(n*i*3)},a=n*i,u=0,c=o.data,f=t.imagePixels,l=e.imagePixels,s=r.imagePixels,h=0;h<a;h++)c[u++]=f[h],c[u++]=l[h],c[u++]=s[h];return o}},{key:"toGrayScale",value:function(t){for(var e=t.width,r=t.height,n=U.Float32(e,r),i=n.imagePixels,o=t.data,a=0,u=0;u<i.length;u++){var c=o[a++],f=o[a++],l=o[a++];i[u]=.299*c+.587*f+.114*l}return n}},{key:"toHSV",value:function(t){for(var e=t.width,r=t.height,n=U.Float32(e,r),i=U.Float32(e,r),o=U.Float32(e,r),a=n.imagePixels,u=i.imagePixels,c=o.imagePixels,f=t.data,l=0,s=0;s<e*r;s++){var h=f[l++],p=f[l++],y=f[l++],g=this.Rgb2Hsv(h/255,p/255,y/255);a[s]=g.h,u[s]=g.s,c[s]=g.v}return[n,i,o]}},{key:"fromHSV",value:function(t,e,r){for(var n=t.width,i=t.height,o={width:n,height:i,data:new Uint8Array(n*i*3)},a=o.data,u=t.imagePixels,c=e.imagePixels,f=r.imagePixels,l=0,s=0;s<n*i;s++){var h=u[s],p=c[s],y=f[s],g=this.Hsv2Rgb(h,p,y);a[l++]=255*g.r,a[l++]=255*g.g,a[l++]=255*g.b}return o}},{key:"Rgb2Hsv",value:function(t,e,r){var n={h:0,v:0,s:0},i=Math.min(t,e,r),o=Math.max(t,e,r),a=o-i;return n.v=o,a<1e-5?(n.h=0,n.s=0):(B(o>0),n.s=a/o,t===o&&(n.h=0+(e-r)/a),e===o&&(n.h=2+(r-t)/a),r===o&&(n.h=4+(t-e)/a)),n.h*=60,n.h<0&&(n.h+=360),B(n.h>=0,"invalid hue ".concat(n.h," with (").concat(t,",").concat(e,",").concat(r,")")),B(n.s>=0,"invalid sat ".concat(n.s," with (").concat(t,",").concat(e,",").concat(r,")")),B(n.v>=0,"invalid val ".concat(n.v," with (").concat(t,",").concat(e,",").concat(r,")")),B(n.h<=360,"invalid hue ".concat(n.h," with (").concat(t,",").concat(e,",").concat(r,")")),B(n.s<=1,"invalid sat ".concat(n.s," with (").concat(t,",").concat(e,",").concat(r,")")),B(n.v<=1,"invalid val ".concat(n.v," with (").concat(t,",").concat(e,",").concat(r,")")),n}},{key:"Hsv2Rgb",value:function(t,e,r){var n={r:r,g:r,b:r};if(e>0){B(t<=360);var i=t/60,o=Math.floor(i),a=i-o,u=r*(1-e),c=r*(1-e*a),f=r*(1-e*(1-a));switch(o){case 0:n.r=r,n.g=f,n.b=u;break;case 1:n.r=c,n.g=r,n.b=u;break;case 2:n.r=u,n.g=r,n.b=f;break;case 3:n.r=u,n.g=c,n.b=r;break;case 4:n.r=f,n.g=u,n.b=r;break;default:n.r=r,n.g=u,n.b=c}}return B(n.r>=0,"invalid red ".concat(n.r," for (").concat(t,",").concat(e,",").concat(r,")")),B(n.g>=0,"invalid green ".concat(n.g," for (").concat(t,",").concat(e,",").concat(r,")")),B(n.b>=0,"invalid blue ".concat(n.b," for (").concat(t,",").concat(e,",").concat(r,")")),B(n.r<=256,"invalid red ".concat(n.r," for (").concat(t,",").concat(e,",").concat(r,")")),B(n.g<=256,"invalid green ".concat(n.g," for (").concat(t,",").concat(e,",").concat(r,")")),B(n.b<=256,"invalid blue ".concat(n.b," for (").concat(t,",").concat(e,",").concat(r,")")),n}},{key:"toLab",value:function(t){for(var e=t.width,r=t.height,n=U.Float32(e,r),i=U.Float32(e,r),o=U.Float32(e,r),a=n.imagePixels,u=i.imagePixels,c=o.imagePixels,f=t.data,l=0,s=0;s<e*r;s++){var h=f[l++],p=f[l++],y=f[l++],g=this.Rgb2Lab(h/255,p/255,y/255);a[s]=g.l,u[s]=g.a,c[s]=g.b}return[n,i,o]}},{key:"fromLab",value:function(t,e,r){for(var n=t.width,i=t.height,o={width:n,height:i,data:new Uint8Array(n*i*3)},a=o.data,u=t.imagePixels,c=e.imagePixels,f=r.imagePixels,l=0,s=0;s<n*i;s++){var h=u[s],p=c[s],y=f[s],g=this.Lab2Rgb(h,p,y);a[l++]=255*g.r,a[l++]=255*g.g,a[l++]=255*g.b}return o}},{key:"Rgb2Lab",value:function(t,e,r){var n=(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92))/.95047,i=(.2126*t+.7152*e+.0722*r)/1,o=(.0193*t+.1192*e+.9505*r)/1.08883;return n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,{l:116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,a:500*(n-i),b:200*(i-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))}}},{key:"Lab2Rgb",value:function(t,e,r){var n=(t+16)/116,i=e/500+n,o=n-r/200,a={r:3.2406*(i=.95047*(i*i*i>.008856?i*i*i:(i-16/116)/7.787))+-1.5372*(n=1*(n*n*n>.008856?n*n*n:(n-16/116)/7.787))+-.4986*(o=1.08883*(o*o*o>.008856?o*o*o:(o-16/116)/7.787)),g:-.9689*i+1.8758*n+.0415*o,b:.0557*i+-.204*n+1.057*o};return a.r=a.r>.0031308?1.055*Math.pow(a.r,1/2.4)-.055:12.92*a.r,a.g=a.g>.0031308?1.055*Math.pow(a.g,1/2.4)-.055:12.92*a.g,a.b=a.b>.0031308?1.055*Math.pow(a.b,1/2.4)-.055:12.92*a.b,a.r=Math.max(0,Math.min(1,a.r)),a.g=Math.max(0,Math.min(1,a.g)),a.b=Math.max(0,Math.min(1,a.b)),a}}]),t}(),G=function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(e,r){if(r<0)throw Error("Invalid Gaissian Sigma : ".concat(r));var n=t.buildKernel(r),i=e.width,o=e.height,a=e.imagePixels;t.applySeparableKernel(a,n,i,o)}},{key:"buildKernel",value:function(t){var e=Math.ceil(1.5*t);e=e<1?1:e;for(var r=new Array(2*e+1).fill(0),n=1/(t*t),i=0;i<=e;i++)r[e+i]=Math.exp(i*i*-n),r[e-i]=r[e+i];var o=r.reduce((function(t,e){return t+e}),0);return r.map((function(t){return t/o}))}},{key:"applySeparableKernel",value:function(t,e,r,n){for(var i=U.Float32(r,n).imagePixels,o=(e.length-1)/2,a=0;a<n;a++)for(var u=a*r,c=0;c<r;c++){for(var f=0,l=c-o,s=0;s<e.length;s++){var h=l+s;h<0&&(h*=-1),h>=r&&(h=2*r-2-h),f+=e[s]*t[h+u]}i[u+c]=f}for(var p=0;p<r;p++)for(var y=0;y<n;y++){for(var g=0,v=y-o,d=0;d<e.length;d++){var m=v+d;m<0&&(m*=-1),m>=n&&(m=2*n-2-m),g+=e[d]*i[m*r+p]}t[y*r+p]=g}}}]),t}(),H=r(1),K=function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(t,e,r,n,i){for(var o=t.convertTo(t.imageType),a=e.convertTo(e.imageType),u=r.convertTo(r.imageType),c=t.width,f=t.height,l=this.buildSpaceWeights(n),s=this.buildRangeWeights(i),h=(l.length-1)/2,p=0;p<f;p++)for(var y=0;y<c;y++){for(var g=t.get(y,p),v=e.get(y,p),d=r.get(y,p),m=0,b=0,w=0,O=0,x=-h;x<=h;x++)for(var E=-h;E<=h;E++){var S=E+y,P=x+p;if(S>=0&&P>=0&&S<c&&P<f){var j=t.get(S,P),k=e.get(S,P),A=r.get(S,P),I=j-g,T=k-v,M=A-d,_=Math.round(Math.sqrt(I*I+T*T+M*M)),R=l[x+h][E+h]*(_<s.length?s[_]:0);R>0&&(m+=R,b+=j*R,w+=k*R,O+=A*R)}}H(m>0),o.set(y,p,b/m),a.set(y,p,w/m),u.set(y,p,O/m)}return[o,a,u]}},{key:"buildSpaceWeights",value:function(t){var e=G.buildKernel(t),r=new Array(e.length).fill(null).map((function(){return new Array(e.length).fill(0)}));return r.forEach((function(t,n){t.forEach((function(t,i){return r[n][i]=e[n]*e[i]}))})),r}},{key:"buildRangeWeights",value:function(t){var e=G.buildKernel(t);H(e.length%2==1);var r=(e.length-1)/2,n=new Array(r).fill(0);return n.forEach((function(t,i){return n[i]=e[i+r]})),n}}]),t}(),W=(r(1),function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.98,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=t.width,a=t.height,u=U.Float32(o,a),c=t.convertTo(t.imageType),f=t.convertTo(t.imageType);G.Run(c,e),G.Run(f,r);var l=c.imagePixels,s=f.imagePixels,h=u.imagePixels;return l.forEach((function(t,e){var r=t-n*s[e],o=1;r<0&&(o=1+Math.tanh(i*r)),h[e]=o})),u}}]),t}()),$=function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=t.imagePixels;n.forEach((function(t,i){var o=Math.floor(t/e),a=e*(o+.5);a+=e/2*Math.tanh(r*(t-a)),n[i]=a}))}}]),t}(),J={majVec:[0,0],minVec:[0,0],majVal:0,minVal:0},X=function(){function t(e,r){_(this,t),this.tensors=void 0,this.nx=void 0,this.tensors=e,this.nx=r}return D(t,[{key:"get",value:function(t,e){if(!this.checkBoundary(t,e))throw Error("invalid tensor position ".concat(t,",").concat(e," field size ").concat(this.width,",").concat(this.height));return this.tensors[e*this.nx+t]}},{key:"checkBoundary",value:function(t,e){return t>=0&&e>=0&&t<this.width&&e<this.height}},{key:"width",get:function(){return this.nx}},{key:"height",get:function(){return this.tensors.length/this.nx}},{key:"fieldTensors",get:function(){return this.tensors}}]),t}(),Z=function(){function t(e){_(this,t),this.grad=void 0,this.grad=this.generateGradients(e)}return D(t,[{key:"gradients",value:function(){return this.grad.flat(1)}},{key:"magnetude",value:function(){var t=U.Float32(this.width,this.height),e=t.imagePixels;return this.gradients().forEach((function(t,r){var n=o(t,2),i=n[0],a=n[1],u=Math.sqrt(i*i+a*a);e[r]=u})),t}},{key:"gradient",value:function(t,e){if(t<0||t>=this.width||e<0||e>=this.height)throw Error("requested invalid gradient at ".concat(t,",").concat(e));return this.grad[e][t]}},{key:"generateGradients",value:function(t){for(var e=t.width,r=t.height,n=t.imagePixels,i=Array(r).fill([]).map((function(){return Array(e).fill([]).map((function(){return[0,0]}))})),o=1;o<r-1;o++)for(var a=o*e,u=a+e,c=a-e,f=1;f<e-1;f++){var l=u+f,s=a+f,h=c+f,p=2*n[s+1]+n[h+1]+n[l+1]-2*n[s-1]-n[h-1]-n[l-1],y=2*n[l]+n[l+1]+n[l-1]-2*n[h]-n[h+1]-n[h-1];i[o][f]=[p,y]}return i}},{key:"width",get:function(){return this.grad[0].length}},{key:"height",get:function(){return this.grad.length}}]),t}(),Y=function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(t,e,r,n,i){var a=this,u=o(this.filterComponents(t,e,r,n),3),c=u[0],f=u[1],l=u[2];if(i){var s=o(this.relax(c,f,l,i),3);c=s[0],f=s[1],l=s[2]}var h=t.width,p=t.height,y=Array(h*p).fill(J).map((function(t,e){var r=c.imagePixels[e],n=f.imagePixels[e],i=l.imagePixels[e],o=Math.sqrt((r-n)*(r-n)+4*i*i),u=(r+n+o)/2,s=(r+n-o)/2,h=a.normalize([2*i,n-r+o]),p=a.normalize([2*i,n-r-o]);return a.isZero(i)&&(a.isZero(h[1])&&(h=[p[1],-p[0]]),a.isZero(p[1])&&(p=[h[1],-h[0]])),{majVec:h,minVec:p,majVal:u,minVal:s}}));return new X(y,h)}},{key:"relax",value:function(t,e,r,n){for(var i=t.width,o=t.height,a=n.tau*n.tau,u=0;u<n.nIterations;u++){for(var c=U.Float32(i,o),f=U.Float32(i,o),l=U.Float32(i,o),s=1;s<o-1;s++)for(var h=1;h<i-1;h++){var p=t.get(h,s),y=e.get(h,s),g=r.get(h,s);p*p+y*y+2*g*g<a&&(p=this.average(t,h,s),y=this.average(e,h,s),g=this.average(r,h,s)),c.set(h,s,p),f.set(h,s,y),l.set(h,s,g)}t=c,e=f,r=l}return[t,e,r]}},{key:"average",value:function(t,e,r){return(t.get(e-1,r)+t.get(e,r-1)+t.get(e+1,r)+t.get(e,r+1))/4}},{key:"filterComponents",value:function(t,e,r,n){var i=new Z(t),o=new Z(e),a=new Z(r),u=t.width,c=e.height,f=U.Float32(u,c),l=U.Float32(u,c),s=U.Float32(u,c),h=i.gradients(),p=o.gradients(),y=a.gradients(),g=f.imagePixels,v=l.imagePixels,d=s.imagePixels;return g.forEach((function(t,e){return g[e]=h[e][0]*h[e][0]+p[e][0]*p[e][0]+y[e][0]*y[e][0]})),v.forEach((function(t,e){return v[e]=h[e][1]*h[e][1]+p[e][1]*p[e][1]+y[e][1]*y[e][1]})),d.forEach((function(t,e){return d[e]=h[e][0]*h[e][1]+p[e][0]*p[e][1]+y[e][0]*y[e][1]})),G.Run(f,n),G.Run(l,n),G.Run(s,n),[f,l,s]}},{key:"normalize",value:function(t){var e=o(t,2),r=e[0],n=e[1],i=Math.sqrt(r*r+n*n);return this.isZero(i)||(r/=i,n/=i),[r,n]}},{key:"isZero",value:function(t){return Math.abs(t)<1e-6}}]),t}(),Q=function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(t,e,r,n,i){var o=Y.Run(t,e,r,n,i),a=G.buildKernel(n);return this.directionalSmoothing(t,e,r,o,a)}},{key:"directionalSmoothing",value:function(t,e,r,n,i){for(var o=(i.length-1)/2,a=t.convertTo(t.imageType),u=e.convertTo(e.imageType),c=r.convertTo(r.imageType),f=t.width,l=t.height,s=Math.cos(30*Math.PI/180),h=0;h<l;h++)for(var p=0;p<f;p++){for(var y=i[o],g=i[o]*t.get(p,h),v=i[o]*e.get(p,h),d=i[o]*r.get(p,h),m=0,b=[-1,1];m<b.length;m++)for(var w=b[m],O=this.mult(n.get(p,h).minVec,w),x=p,E=h,S=1;S<=o&&(x=Math.round(x+O[0]),E=Math.round(E+O[1]),x>=0&&x<f&&E>=0&&E<l);S++){var P=n.get(x,E).minVec,j=this.dot(O,P);if(Math.abs(j)<s)break;j<0&&(P=this.mult(P,-1)),y+=i[o+S],g+=i[o+S]*t.get(x,E),v+=i[o+S]*e.get(x,E),d+=i[o+S]*r.get(x,E),O=P}g/=y,v/=y,d/=y,a.set(p,h,g),u.set(p,h,v),c.set(p,h,d)}return[a,u,c]}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"mult",value:function(t,e){return[e*t[0],e*t[1]]}}]),t}(),tt=function(){function t(e,r){_(this,t),this.lImage=void 0,this.aImage=void 0,this.bImage=void 0,this.currStep=0,this.numSteps=0;var n=o(V.toLab(e),3);this.lImage=n[0],this.aImage=n[1],this.bImage=n[2],this.numSteps=r}return D(t,[{key:"nextImage",value:function(){var t=null;return this.currStep<this.numSteps&&(t=this.generate(this.currStep),this.currStep++),t}},{key:"current",get:function(){return this.currStep}},{key:"total",get:function(){return this.numSteps}}]),t}(),et=function(t){L(r,t);var e=N(r);function r(t){var n;return _(this,r),(n=e.call(this,t,5)).oImage=void 0,n.dImage=null,n.oImage=t,n}return D(r,[{key:"generate",value:function(t){var e;if(t<4){var r=o(Q.Run(this.lImage,this.aImage,this.bImage,2),3);this.lImage=r[0],this.aImage=r[1],this.bImage=r[2];var n=o(Q.Run(this.lImage,this.aImage,this.bImage,2),3);this.lImage=n[0],this.aImage=n[1],this.bImage=n[2];var i=o(K.Run(this.lImage,this.aImage,this.bImage,2,2),3);this.lImage=i[0],this.aImage=i[1],this.bImage=i[2],e=V.fromLab(this.lImage,this.aImage,this.bImage)}else this.luminosityQuantization(),e=V.fromLab(this.lImage,this.aImage,this.bImage);return 3==t&&this.generateDog(),null!=this.dImage&&null!=e&&this.overlayDog(e),e}},{key:"luminosityQuantization",value:function(){$.Run(this.lImage,12,1)}},{key:"generateDog",value:function(){this.dImage=W.Run(this.lImage,1,1.6,.98,3)}},{key:"overlayDog",value:function(t){for(var e=this.dImage,r=e.width*e.height,n=e.imagePixels,i=this.oImage.data,o=0,a=0;a<r;a++){var u=n[a];t.data[o]=u*t.data[o]+(1-u)*i[o++],t.data[o]=u*t.data[o]+(1-u)*i[o++],t.data[o]=u*t.data[o]+(1-u)*i[o++]}}}]),r}(tt);function rt(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function nt(t){return!!t&&!!t[Kt]}function it(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[Ht]||!!t.constructor[Ht]||st(t)||ht(t))}function ot(t,e,r){void 0===r&&(r=!1),0===at(t)?(r?Object.keys:Wt)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function at(t){var e=t[Kt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:st(t)?2:ht(t)?3:0}function ut(t,e){return 2===at(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ct(t,e){return 2===at(t)?t.get(e):t[e]}function ft(t,e,r){var n=at(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function lt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function st(t){return Ct&&t instanceof Map}function ht(t){return Bt&&t instanceof Set}function pt(t){return t.o||t.t}function yt(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=$t(t);delete e[Kt];for(var r=Wt(e),n=0;n<r.length;n++){var i=r[n],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function gt(t,e){return void 0===e&&(e=!1),dt(t)||nt(t)||!it(t)||(at(t)>1&&(t.set=t.add=t.clear=t.delete=vt),Object.freeze(t),e&&ot(t,(function(t,e){return gt(e,!0)}),!0)),t}function vt(){rt(2)}function dt(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function mt(t){var e=Jt[t];return e||rt(18,t),e}function bt(t,e){Jt[t]||(Jt[t]=e)}function wt(){return Nt}function Ot(t,e){e&&(mt("Patches"),t.u=[],t.s=[],t.v=e)}function xt(t){Et(t),t.p.forEach(Pt),t.p=null}function Et(t){t===Nt&&(Nt=t.l)}function St(t){return Nt={p:[],l:Nt,h:t,m:!0,_:0}}function Pt(t){var e=t[Kt];0===e.i||1===e.i?e.j():e.g=!0}function jt(t,e){e._=e.p.length;var r=e.p[0],n=void 0!==t&&t!==r;return e.h.O||mt("ES5").S(e,t,n),n?(r[Kt].P&&(xt(e),rt(4)),it(t)&&(t=kt(e,t),e.l||It(e,t)),e.u&&mt("Patches").M(r[Kt],t,e.u,e.s)):t=kt(e,r,[]),xt(e),e.u&&e.v(e.u,e.s),t!==Gt?t:void 0}function kt(t,e,r){if(dt(e))return e;var n=e[Kt];if(!n)return ot(e,(function(i,o){return At(t,n,e,i,o,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return It(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=yt(n.k):n.o;ot(3===n.i?new Set(i):i,(function(e,o){return At(t,n,i,e,o,r)})),It(t,i,!1),r&&t.u&&mt("Patches").R(n,r,t.u,t.s)}return n.o}function At(t,e,r,n,i,o){if(nt(i)){var a=kt(t,i,o&&e&&3!==e.i&&!ut(e.D,n)?o.concat(n):void 0);if(ft(r,n,a),!nt(a))return;t.m=!1}if(it(i)&&!dt(i)){if(!t.h.N&&t._<1)return;kt(t,i),e&&e.A.l||It(t,i)}}function It(t,e,r){void 0===r&&(r=!1),t.h.N&&t.m&&gt(e,r)}function Tt(t,e){var r=t[Kt];return(r?pt(r):t)[e]}function Mt(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function _t(t){t.P||(t.P=!0,t.l&&_t(t.l))}function Rt(t){t.o||(t.o=yt(t.t))}function Dt(t,e,r){var n=st(e)?mt("MapSet").T(e,r):ht(e)?mt("MapSet").F(e,r):t.O?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:wt(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},i=n,o=Xt;r&&(i=[n],o=Zt);var a=Proxy.revocable(i,o),u=a.revoke,c=a.proxy;return n.k=c,n.j=u,c}(e,r):mt("ES5").J(e,r);return(r?r.A:wt()).p.push(n),n}function Lt(t){return nt(t)||rt(22,t),function t(e){if(!it(e))return e;var r,n=e[Kt],i=at(e);if(n){if(!n.P&&(n.i<4||!mt("ES5").K(n)))return n.t;n.I=!0,r=Ft(e,i),n.I=!1}else r=Ft(e,i);return ot(r,(function(e,i){n&&ct(n.t,e)===i||ft(r,e,t(i))})),3===i?new Set(r):r}(t)}function Ft(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return yt(t)}function qt(){function t(t,e){var r=i[t];return r?r.enumerable=e:i[t]=r={configurable:!0,enumerable:e,get:function(){var e=this[Kt];return Xt.get(e,t)},set:function(e){var r=this[Kt];Xt.set(r,t,e)}},r}function e(t){for(var e=t.length-1;e>=0;e--){var i=t[e][Kt];if(!i.P)switch(i.i){case 5:n(i)&&_t(i);break;case 4:r(i)&&_t(i)}}}function r(t){for(var e=t.t,r=t.k,n=Wt(r),i=n.length-1;i>=0;i--){var o=n[i];if(o!==Kt){var a=e[o];if(void 0===a&&!ut(e,o))return!0;var u=r[o],c=u&&u[Kt];if(c?c.t!==a:!lt(u,a))return!0}}var f=!!e[Kt];return n.length!==Wt(e).length+(f?0:1)}function n(t){var e=t.k;if(e.length!==t.t.length)return!0;var r=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!r||r.get)}var i={};bt("ES5",{J:function(e,r){var n=Array.isArray(e),i=function(e,r){if(e){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,t(i,!0));return n}var o=$t(r);delete o[Kt];for(var a=Wt(o),u=0;u<a.length;u++){var c=a[u];o[c]=t(c,e||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(n,e),o={i:n?5:4,A:r?r.A:wt(),P:!1,I:!1,D:{},l:r,t:e,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Kt,{value:o,writable:!0}),i},S:function(t,r,i){i?nt(r)&&r[Kt].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var r=e[Kt];if(r){var i=r.t,o=r.k,a=r.D,u=r.i;if(4===u)ot(o,(function(e){e!==Kt&&(void 0!==i[e]||ut(i,e)?a[e]||t(o[e]):(a[e]=!0,_t(r)))})),ot(i,(function(t){void 0!==o[t]||ut(o,t)||(a[t]=!1,_t(r))}));else if(5===u){if(n(r)&&(_t(r),a.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)a[c]=!1;else for(var f=i.length;f<o.length;f++)a[f]=!0;for(var l=Math.min(o.length,i.length),s=0;s<l;s++)void 0===a[s]&&t(o[s])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?r(t):n(t)}})}var zt,Nt,Ut="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ct="undefined"!=typeof Map,Bt="undefined"!=typeof Set,Vt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Gt=Ut?Symbol.for("immer-nothing"):((zt={})["immer-nothing"]=!0,zt),Ht=Ut?Symbol.for("immer-draftable"):"__$immer_draftable",Kt=Ut?Symbol.for("immer-state"):"__$immer_state",Wt=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames),$t=Object.getOwnPropertyDescriptors||function(t){var e={};return Wt(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},Jt={},Xt={get:function(t,e){if(e===Kt)return t;var r=pt(t);if(!ut(r,e))return function(t,e,r){var n,i=Mt(e,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!it(n)?n:n===Tt(t.t,e)?(Rt(t),t.o[e]=Dt(t.A.h,n,t)):n},has:function(t,e){return e in pt(t)},ownKeys:function(t){return Reflect.ownKeys(pt(t))},set:function(t,e,r){var n=Mt(pt(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Tt(pt(t),e),o=null==i?void 0:i[Kt];if(o&&o.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(lt(r,i)&&(void 0!==r||ut(t.t,e)))return!0;Rt(t),_t(t)}return t.o[e]=r,t.D[e]=!0,!0},deleteProperty:function(t,e){return void 0!==Tt(t.t,e)||e in t.t?(t.D[e]=!1,Rt(t),_t(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=pt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){rt(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){rt(12)}},Zt={};ot(Xt,(function(t,e){Zt[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Zt.deleteProperty=function(t,e){return Xt.deleteProperty.call(this,t[0],e)},Zt.set=function(t,e,r){return Xt.set.call(this,t[0],e,r,t[0])};var Yt=new(function(){function t(t){this.O=Vt,this.N=!0,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var e=t.prototype;return e.produce=function(t,e,r){if("function"==typeof t&&"function"!=typeof e){var n=e;e=t;var i=this;return function(t){var r=this;void 0===t&&(t=n);for(var o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return i.produce(t,(function(t){var n;return(n=e).call.apply(n,[r,t].concat(a))}))}}var o;if("function"!=typeof e&&rt(6),void 0!==r&&"function"!=typeof r&&rt(7),it(t)){var a=St(this),u=Dt(this,t,void 0),c=!0;try{o=e(u),c=!1}finally{c?xt(a):Et(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return Ot(a,r),jt(t,a)}),(function(t){throw xt(a),t})):(Ot(a,r),jt(o,a))}if(!t||"object"!=typeof t){if((o=e(t))===Gt)return;return void 0===o&&(o=t),this.N&&gt(o,!0),o}rt(21,t)},e.produceWithPatches=function(t,e){var r,n,i=this;return"function"==typeof t?function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return i.produceWithPatches(e,(function(e){return t.apply(void 0,[e].concat(n))}))}:[this.produce(t,e,(function(t,e){r=t,n=e})),r,n]},e.createDraft=function(t){it(t)||rt(8),nt(t)&&(t=Lt(t));var e=St(this),r=Dt(this,t,void 0);return r[Kt].C=!0,Et(e),r},e.finishDraft=function(t,e){var r=(t&&t[Kt]).A;return Ot(r,e),jt(void 0,r)},e.setAutoFreeze=function(t){this.N=t},e.setUseProxies=function(t){t&&!Vt&&rt(20),this.O=t},e.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}var i=mt("Patches").$;return nt(t)?i(t,e):this.produce(t,(function(t){return i(t,e.slice(r+1))}))},t}()),Qt=Yt.produce,te=(Yt.produceWithPatches.bind(Yt),Yt.setAutoFreeze.bind(Yt),Yt.setUseProxies.bind(Yt),Yt.applyPatches.bind(Yt),Yt.createDraft.bind(Yt),Yt.finishDraft.bind(Yt),Qt),ee=(r(2),function(){return Math.random().toString(36).substring(7).split("").join(".")});ee(),ee();function re(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function ne(t,e){return t===e}function ie(t,e,r){if(null===e||null===r||e.length!==r.length)return!1;for(var n=e.length,i=0;i<n;i++)if(!t(e[i],r[i]))return!1;return!0}function oe(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"===typeof t}))){var r=e.map((function(t){return typeof t})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return e}!function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n]}((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne,r=null,n=null;return function(){return ie(e,r,arguments)||(n=t.apply(null,arguments)),r=arguments,n}}));function ae(t){return function(e){var r=e.dispatch,n=e.getState;return function(e){return function(i){return"function"===typeof i?i(r,n,t):e(i)}}}}var ue=ae();ue.withExtraArgument=ae;function ce(){return(ce=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;function fe(t,e){function r(){if(e){var r=e.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return ce({type:t,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:t,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(e){return e.type===t},r}function le(t){var e,r={},n=[],i={addCase:function(t,e){var n="string"===typeof t?t:t.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=e,i},addMatcher:function(t,e){return n.push({matcher:t,reducer:e}),i},addDefaultCase:function(t){return e=t,i}};return t(i),[r,n,e]}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var se;qt(),function(t){t[t.Tensor=0]="Tensor",t[t.Bilateral=1]="Bilateral"}(se||(se={}));var he=function(t){var e=t.name,r=t.initialState;if(!e)throw new Error("`name` is a required option for createSlice");var n=t.reducers||{},i="undefined"===typeof t.extraReducers?[]:"function"===typeof t.extraReducers?le(t.extraReducers):[t.extraReducers],o=i[0],a=void 0===o?{}:o,u=i[1],c=void 0===u?[]:u,f=i[2],l=void 0===f?void 0:f,s=Object.keys(n),h={},p={},y={};s.forEach((function(t){var r,i,o=n[t],a=function(t,e){return t+"/"+e}(e,t);"reducer"in o?(r=o.reducer,i=o.prepare):r=o,h[t]=r,p[a]=r,y[t]=i?fe(a,i):fe(a)}));var g=function(t,e,r,n){void 0===r&&(r=[]);var i="function"===typeof e?le(e):[e,r,n],o=i[0],a=i[1],u=i[2];return function(e,r){void 0===e&&(e=t);var n=[o[r.type]].concat(a.filter((function(t){return(0,t.matcher)(r)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[u]),n.reduce((function(t,e){if(e){if(nt(t)){var n=e(t,r);return"undefined"===typeof n?t:n}if(it(t))return te(t,(function(t){return e(t,r)}));var i=e(t,r);if("undefined"===typeof i){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return t}),e)}}(r,ce({},a,{},p),c,l);return{name:e,reducer:g,actions:y,caseReducers:h}}({name:"PainterType",initialState:{painter:se.Bilateral},reducers:{setPainter:function(t,e){t.painter=e.payload}}}),pe=(he.actions.setPainter,he.reducer,function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(t,e,r){for(var n=t.width,i=t.height,o=U.Float32(n,i),a=Math.ceil(5*r),u=r*r,c=Array(a+1).fill(0).map((function(t,e){return(e*e-u)*Math.exp(-e*e/(2*u))})),f=(Math.sqrt(2*Math.PI),a);f<i-a;f++)for(var l=a;l<n-a;l++){for(var s=e.get(l,f),h=c[0]*t.get(l,f),p=1;p<=a;p++){var y=s.majVec[0]*p,g=s.majVec[1]*p,v=t.get(Math.round(l+y),Math.round(f+g))+t.get(Math.round(l-y),Math.round(f-g));h+=c[p]*v}o.set(l,f,h)}return o}}]),t}()),ye=function(){function t(){_(this,t)}return D(t,null,[{key:"Run",value:function(t,e,r,n,i){for(var o=t.width,a=t.height,u=t.convertTo(t.imageType),c=pe.Run(t,e,r),f=i;f<a-i;f++)for(var l=i;l<o-i;l++){var s=e.get(l,f),h=s.majVec,p=s.minVec,y=c.get(l,f),g=h[0]*h[0]+h[1]*h[1];if(Math.abs(y)>n&&g>0){for(var v=Number.MAX_VALUE,d=-v,m=-i;m<=i;m++){var b=l+h[0]*m,w=f+h[1]*m,O=this.Sample(t,b,w,p,0),x=this.Sample(t,b,w,p,.5),E=this.Sample(t,b,w,p,-.5);d=Math.max(O,x,E,d),v=Math.min(O,x,E,v)}var S=y<0?d:v;u.set(l,f,S)}}return u}},{key:"Sample",value:function(t,e,r,n,i){var o=e+n[0]*i,a=r+n[1]*i,u=Math.round(o),c=Math.round(a);return t.get(u,c)}}]),t}(),ge={nIterations:2,tau:2e4},ve=function(t){L(r,t);var e=N(r);function r(t){return _(this,r),e.call(this,t,6)}return D(r,[{key:"generate",value:function(t){var e=o(Q.Run(this.lImage,this.aImage,this.bImage,1.5,ge),3);this.lImage=e[0],this.aImage=e[1],this.bImage=e[2];var r=Y.Run(this.lImage,this.aImage,this.bImage,1,ge);return this.lImage=ye.Run(this.lImage,r,1.5,5,1),V.fromLab(this.lImage,this.aImage,this.bImage)}}]),r}(tt),de=function(){function t(e,r){switch(_(this,t),this.worker=null,r){case se.Bilateral:this.worker=new et(e);break;case se.Tensor:this.worker=new ve(e)}}return D(t,[{key:"next",value:function(){var t=M(I.a.mark((function t(){var e,r,n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,r=0,n=0,this.worker&&(e=this.worker.nextImage(),r=this.worker.current,n=this.worker.total),t.abrupt("return",{image:e,current:r,total:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stop",value:function(){var t=M(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.worker=null;case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();d(Object.keys(e).reduce((function(t,r){return"__esModule"==r||(t[r]=e[r]),t}),{}))}]);
//# sourceMappingURL=3e235be0118cc621caf8.worker.js.map