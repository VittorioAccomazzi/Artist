(this.webpackJsonpartist=this.webpackJsonpartist||[]).push([[0],{47:function(e){e.exports=JSON.parse('{"version":"a3f27c4\\n","long":"a3f27c42904f5e78ea006685aba0f241f3b09b89\\n"}')},63:function(e,t,n){var r,a=n(94).wrap,i=n(86);e.exports=function e(){return this instanceof e?a(i()):r||(r=a(i()))}},86:function(e,t,n){e.exports=function(){return new Worker(n.p+"3e235be0118cc621caf8.worker.js")}},92:function(e,t,n){"use strict";n.r(t);var r,a=n(2),i=n(0),c=n(17),o=n.n(c),s=n(67),u=n(123),l=n(6),h=n(117),f=n(118),d=n(66),b=n.n(d),v=n(47),g=n(112),m=Object(g.a)((function(e){return{version:{position:"absolute",left:"14px",bottom:"0px",fontSize:"12px",color:e.palette.primary.main},ribbon:{position:"absolute",right:"0px",top:"0px"}}})),j=function(e){var t=e.label,n=e.baseURL,r=e.forkme,i=m();return Object(a.jsxs)(a.Fragment,{children:[r&&n&&Object(a.jsx)("div",{className:i.ribbon,children:Object(a.jsx)("a",{href:n,children:Object(a.jsx)("img",{width:"100",height:"100",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=100%2C100",alt:"Fork me on GitHub"})})}),Object(a.jsx)("div",{className:i.version,onClick:function(){n&&""!==v.long&&(window.location.href=n+"/tree/"+v.long)},children:Object(a.jsx)("p",{children:t+v.version})})]})},p=n(124),x=n(116),w=n(115),O=n(121),y=n(12),k=n(20);!function(e){e[e.Tensor=0]="Tensor",e[e.Bilateral=1]="Bilateral"}(r||(r={}));var M={painter:r.Bilateral},E=Object(k.b)({name:"PainterType",initialState:M,reducers:{setPainter:function(e,t){e.painter=t.payload}}}),P=E.actions.setPainter,L=function(e){return e.painter.painter},S=E.reducer,R=n(120),A=Object(g.a)((function(e){return Object(u.a)({menuButton:{marginRight:e.spacing(2),color:"inherit"},menuButtonSelected:{marginRight:e.spacing(2),color:"#F0F0FF",transform:"scale(1.4, 1.4)"}})}));function N(e){var t=e.onClick,n=e.Icon,r=e.isSelected,i=A(),c=r?i.menuButtonSelected:i.menuButton;return Object(a.jsx)(R.a,{edge:"end",className:c,onClick:function(e){return t()},children:Object(a.jsx)(n,{})})}var D=n(60),I=n.n(D),F=n(59),T=n.n(F);function U(){return Object(a.jsx)(C,{Icon:T.a,type:r.Bilateral})}function B(){return Object(a.jsx)(C,{Icon:I.a,type:r.Tensor})}function C(e){var t=e.Icon,n=e.type,r=Object(y.c)(L)===n,i=Object(y.b)();return Object(a.jsx)(N,{onClick:function(){return i(P(n))},Icon:t,isSelected:r})}var W=n(61),H=n.n(W),z=Object(k.b)({name:"DownloadAction",initialState:{download:!1},reducers:{setDownload:function(e,t){e.download=t.payload}}}),_=z.actions.setDownload,q=function(e){return e.download.download},Y=z.reducer;function G(){var e=Object(y.b)();return Object(a.jsx)(N,{onClick:function(){return e(_(!0))},Icon:H.a,isSelected:!1})}var V=Object(k.b)({name:"Progress",initialState:{current:0,total:0},reducers:{setProgress:function(e,t){e.current=t.payload.current,e.total=t.payload.total}}}),J=V.actions.setProgress,X=function(e){return e.progress},$=V.reducer,K=n(119),Q=n(114),Z=Object(g.a)((function(e){return Object(u.a)({cirProgress:{marginRight:e.spacing(2),color:"#0000FF"},txtProgress:{marginRight:e.spacing(2),color:"#0000FF"}})}));function ee(){var e=Z(),t=Object(y.c)(X),n=t.total>0&&t.current<t.total,r=n?t.current/t.total*100:0,i=r>0?"determinate":"indeterminate",c=r>0?"".concat(Math.round(r),"%"):"";return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsxs)(K.a,{position:"relative",display:"inline-flex",children:[Object(a.jsx)(Q.a,{className:e.cirProgress,variant:i,value:r}),Object(a.jsx)(K.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(a.jsx)(w.a,{variant:"caption",component:"div",className:e.txtProgress,children:c})})]}):Object(a.jsx)(a.Fragment,{})})}var te=Object(g.a)((function(e){return Object(u.a)({root:{flexGrow:1},toolbar:{display:"flex",justifyContent:"space-between"},toolList:{display:"flex",alignItems:"center"}})}));function ne(){var e=te();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(p.a,{position:"static",children:Object(a.jsxs)(x.a,{variant:"dense",className:e.toolbar,children:[Object(a.jsx)(O.a,{xsDown:!0,children:Object(a.jsx)(w.a,{variant:"h6",color:"inherit",children:"Artist"})}),Object(a.jsxs)("div",{className:e.toolList,children:[Object(a.jsx)(ee,{}),Object(a.jsx)(U,{}),Object(a.jsx)(B,{}),Object(a.jsx)(G,{})]})]})})})}var re,ae,ie=n(48),ce=n(9),oe=n(68),se=n(65),ue=n.n(se),le=n(64),he=n.n(le),fe=n(40);!function(e){e[e.None=0]="None",e[e.Touch=1]="Touch",e[e.Mouse=2]="Mouse"}(re||(re={})),function(e){e[e.Wheel=-1]="Wheel",e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.LeftAndRight=3]="LeftAndRight"}(ae||(ae={}));var de={device:re.None,event:null};function be(e,t){var n=Object(i.useState)(new DOMMatrix),r=Object(ce.a)(n,2),a=r[0],c=r[1],o=Object(i.useRef)(null),s=Object(i.useRef)(null),u=function(e){var t=Object(i.useState)(de),n=Object(ce.a)(t,2),r=n[0],a=n[1];return Object(i.useEffect)((function(){var t=function(e){var t=e.currentTarget.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},n=function(e){return{x:e.deltaX,y:e.deltaY}},r=function(e){return new Array(e.touches.length).fill({x:0,y:0}).map((function(t,n){return function(e,t){var n=e.currentTarget.getBoundingClientRect();return{x:e.touches[t].clientX-n.left,y:e.touches[t].clientY-n.top}}(e,n)}))},i=function(e){fe.isMobile||a({device:re.Mouse,event:{button:e.buttons,mousePoint:t(e),mouseWheel:{x:0,y:0}}})},c=function(e){fe.isMobile||a({device:re.Mouse,event:{button:e.buttons,mousePoint:null,mouseWheel:null}})},o=function(e){fe.isMobile||a({device:re.Mouse,event:{button:ae.Wheel,mousePoint:t(e),mouseWheel:n(e)}})},s=function(e){fe.isMobile&&a({device:re.Touch,event:{pointers:r(e)}})};if(null!=e.current){var u=e.current;return u.addEventListener("mousedown",i),u.addEventListener("mousemove",i),u.addEventListener("mouseup",i),u.addEventListener("mouseleave",c),u.addEventListener("wheel",o),u.addEventListener("touchstart",s),u.addEventListener("touchmove",s),u.addEventListener("touchend",s),function(){u.removeEventListener("mousedown",i),u.removeEventListener("mousemove",i),u.removeEventListener("mouseup",i),u.removeEventListener("mouseleave",c),u.removeEventListener("wheel",o),u.removeEventListener("touchstart",s),u.removeEventListener("touchmove",s),u.removeEventListener("touchend",s)}}}),[e]),r}(e);return Object(i.useEffect)((function(){c(new DOMMatrix)}),t),Object(i.useEffect)((function(){var e=function(e,t,n,r,i){var o=DOMMatrix.fromMatrix(a),s=o.a;s<.1&&(i=Math.max(1,i)),s>10&&(i=Math.min(1,i));var u=new DOMMatrix;u.translateSelf(e,t,0),o.preMultiplySelf(u);var l=new DOMMatrix;l.scaleSelf(i,i,1,n,r,0),o.preMultiplySelf(l),c(o)};switch(u.device){case re.Mouse:!function(t){if(t.button!==ae.None&&t.mousePoint&&t.mouseWheel)if(t.button===ae.Wheel){var n=1-t.mouseWheel.y/100;e(0,0,t.mousePoint.x,t.mousePoint.y,n),o.current=null}else{if(o.current){var r=t.mousePoint.x-o.current.x,a=t.mousePoint.y-o.current.y;e(r,a,0,0,1)}o.current=t.mousePoint}else o.current=null}(u.event);break;case re.Touch:!function(t){if(null!=t.pointers&&t.pointers.length>0){if(1===t.pointers.length){if(o.current&&null==s.current){var n=t.pointers[0].x-o.current.x,r=t.pointers[0].y-o.current.y;e(n,r,0,0,1)}o.current=t.pointers[0],s.current=null}else if(2===t.pointers.length){var a={x:((h=t.pointers)[0].x+h[1].x)/2,y:(h[0].y+h[1].y)/2},i=function(e){var t=e[0].x-e[1].x,n=e[0].y-e[1].y;return Math.sqrt(t*t+n*n)}(t.pointers);if(o.current&&s.current){var c=a.x-o.current.x,u=a.y-o.current.y,l=i/s.current;e(c,u,a.x,a.y,l)}o.current=a,s.current=i}}else o.current=null,s.current=null;var h}(u.event)}}),[u]),DOMMatrix.fromMatrix(a)}var ve={width:0,height:0};var ge=Object(g.a)((function(e){return{mainDiv:{width:"100%",height:"100%",touchAction:"none",overflow:"hidden"}}}));function me(e){var t=e.children,n=e.filename,r=ge(),c=Object(i.useRef)(null),o=Object(i.useRef)(null),s=be(c,[n]),u=function(e,t,n){var r=Object(i.useState)(new DOMMatrix),a=Object(ce.a)(r,2),c=a[0],o=a[1],s=Object(i.useState)(ve),u=Object(ce.a)(s,2),l=u[0],h=u[1];return Object(i.useEffect)((function(){if(null!=e.current&&null!=t.current){var n=e.current,r=t.current,a=r.clientWidth/n.clientWidth,i=r.clientHeight/n.clientHeight,c=Math.min(a,i),s=(r.clientWidth-n.clientWidth*c)/2,u=(r.clientHeight-n.clientHeight*c)/2,l="matrix( ".concat(c,", 0, 0, ").concat(c,", ").concat(s,", ").concat(u,")");o(new DOMMatrix(l))}}),n.concat([e,t,l])),Object(i.useEffect)((function(){function e(){h({width:window.outerWidth,height:window.outerHeight})}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),DOMMatrix.fromMatrix(c)}(o,c,[t]);return u.preMultiplySelf(s),Object(a.jsx)("div",{className:r.mainDiv,ref:c,children:Object(a.jsx)("div",{style:{position:"relative",transformOrigin:"0px 0px",transform:u.toString(),width:"fit-content",height:"fit-content"},ref:o,children:t})})}var je=n(25),pe=n.n(je),xe=n(49),we=n(23),Oe=n(24),ye=n(63),ke=n.n(ye);var Me=function(){function e(){Object(we.a)(this,e)}return Object(Oe.a)(e,null,[{key:"Uint8",value:function(e,t){return new Ee(Uint8Array.BYTES_PER_ELEMENT,Uint8Array,e,t)}},{key:"Uint16",value:function(e,t){return new Ee(Uint16Array.BYTES_PER_ELEMENT,Uint16Array,e,t)}},{key:"Float32",value:function(e,t){return new Ee(Float32Array.BYTES_PER_ELEMENT,Float32Array,e,t)}},{key:"Image",value:function(t,n,r){switch(t){case"Uint8":return e.Uint8(n,r);case"Uint16":return e.Uint16(n,r);case"Float32":return e.Float32(n,r)}}}]),e}(),Ee=function(){function e(t,n,r,a){Object(we.a)(this,e),this.buffer=void 0,this.pixels=void 0;var i=r*a,c=new ArrayBuffer(i*t);this.pixels=Array.from(Array(a),(function(e,a){return new n(c,r*t*a,r)})),this.buffer=new n(c,0,i)}return Object(Oe.a)(e,[{key:"get",value:function(e,t){if(!this.checkBoundary(e,t))throw new Error("Invalid image coordinates queried: image size ".concat(this.width,"x").concat(this.height," pixel ").concat(e,",").concat(t));return this.pixels[t][e]}},{key:"maxValue",value:function(){return this.buffer.reduce((function(e,t,n){return Math.max(t,e)}),this.buffer[0])}},{key:"minValue",value:function(){return this.buffer.reduce((function(e,t,n){return Math.min(t,e)}),this.buffer[0])}},{key:"getRow",value:function(e){if(e<0||e>this.height)throw new Error("Invalid y coordinate queried : image height ".concat(this.height," y ").concat(e));return this.pixels[e]}},{key:"set",value:function(e,t,n){if(!this.checkBoundary(e,t))throw new Error("Invalid image coordinates set: image size ".concat(this.width,"x").concat(this.height," pixel ").concat(e,",").concat(t));this.pixels[t][e]=n}},{key:"convertTo",value:function(e,t,n){var r=this,a=Me.Image(e,this.width,this.height),i=a.imagePixels;return null!=t&&null!=n?i.forEach((function(e,a){return i[a]=t*r.buffer[a]+n})):i.forEach((function(e,t){return i[t]=r.buffer[t]})),a}},{key:"checkBoundary",value:function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height}},{key:"imageType",get:function(){return this.pixels[0].constructor.name.replace("Array","")}},{key:"imagePixels",get:function(){return this.buffer}},{key:"imageBuffer",get:function(){return this.buffer.buffer}},{key:"height",get:function(){return this.pixels.length}},{key:"width",get:function(){return this.pixels[0].length}}]),e}(),Pe=n(87),Le=function(){function e(){Object(we.a)(this,e)}return Object(Oe.a)(e,null,[{key:"toSeq",value:function(e){for(var t=e.width,n=e.height,r=e.getContext("2d").getImageData(0,0,t,n),a={width:t,height:n,data:new Uint8Array(t*n*3)},i=0,c=0,o=0;o<t*n;o++)a.data[c++]=r.data[i++],a.data[c++]=r.data[i++],a.data[c++]=r.data[i++],i++;return a}},{key:"fromSeq",value:function(e,t){if(e.width*e.height*3!==e.data.length)throw Error("Invalid SeqCanvas, with ".concat(e.width,", height ").concat(e.height," and length ").concat(e.data.length));t.width=e.width,t.height=e.height;var n=t.getContext("2d");if(n){for(var r=n.getImageData(0,0,e.width,e.height),a=0,i=0,c=0;c<e.width*e.height;c++)r.data[a++]=e.data[i++],r.data[a++]=e.data[i++],r.data[a++]=e.data[i++],r.data[a++]=255;n.putImageData(r,0,0)}}},{key:"toRGB",value:function(e){for(var t=e.width,n=e.height,r=Me.Uint8(t,n),a=Me.Uint8(t,n),i=Me.Uint8(t,n),c=t*n,o=0,s=e.data,u=r.imagePixels,l=a.imagePixels,h=i.imagePixels,f=0;f<c;f++)u[f]=s[o++],l[f]=s[o++],h[f]=s[o++];return[r,a,i]}},{key:"fromRGB",value:function(e,t,n){for(var r=e.width,a=e.height,i={width:r,height:a,data:new Uint8Array(r*a*3)},c=r*a,o=0,s=i.data,u=e.imagePixels,l=t.imagePixels,h=n.imagePixels,f=0;f<c;f++)s[o++]=u[f],s[o++]=l[f],s[o++]=h[f];return i}},{key:"toGrayScale",value:function(e){for(var t=e.width,n=e.height,r=Me.Float32(t,n),a=r.imagePixels,i=e.data,c=0,o=0;o<a.length;o++){var s=i[c++],u=i[c++],l=i[c++];a[o]=.299*s+.587*u+.114*l}return r}},{key:"toHSV",value:function(e){for(var t=e.width,n=e.height,r=Me.Float32(t,n),a=Me.Float32(t,n),i=Me.Float32(t,n),c=r.imagePixels,o=a.imagePixels,s=i.imagePixels,u=e.data,l=0,h=0;h<t*n;h++){var f=u[l++],d=u[l++],b=u[l++],v=this.Rgb2Hsv(f/255,d/255,b/255);c[h]=v.h,o[h]=v.s,s[h]=v.v}return[r,a,i]}},{key:"fromHSV",value:function(e,t,n){for(var r=e.width,a=e.height,i={width:r,height:a,data:new Uint8Array(r*a*3)},c=i.data,o=e.imagePixels,s=t.imagePixels,u=n.imagePixels,l=0,h=0;h<r*a;h++){var f=o[h],d=s[h],b=u[h],v=this.Hsv2Rgb(f,d,b);c[l++]=255*v.r,c[l++]=255*v.g,c[l++]=255*v.b}return i}},{key:"Rgb2Hsv",value:function(e,t,n){var r={h:0,v:0,s:0},a=Math.min(e,t,n),i=Math.max(e,t,n),c=i-a;return r.v=i,c<1e-5?(r.h=0,r.s=0):(Pe(i>0),r.s=c/i,e===i&&(r.h=0+(t-n)/c),t===i&&(r.h=2+(n-e)/c),n===i&&(r.h=4+(e-t)/c)),r.h*=60,r.h<0&&(r.h+=360),Pe(r.h>=0,"invalid hue ".concat(r.h," with (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.s>=0,"invalid sat ".concat(r.s," with (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.v>=0,"invalid val ".concat(r.v," with (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.h<=360,"invalid hue ".concat(r.h," with (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.s<=1,"invalid sat ".concat(r.s," with (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.v<=1,"invalid val ".concat(r.v," with (").concat(e,",").concat(t,",").concat(n,")")),r}},{key:"Hsv2Rgb",value:function(e,t,n){var r={r:n,g:n,b:n};if(t>0){Pe(e<=360);var a=e/60,i=Math.floor(a),c=a-i,o=n*(1-t),s=n*(1-t*c),u=n*(1-t*(1-c));switch(i){case 0:r.r=n,r.g=u,r.b=o;break;case 1:r.r=s,r.g=n,r.b=o;break;case 2:r.r=o,r.g=n,r.b=u;break;case 3:r.r=o,r.g=s,r.b=n;break;case 4:r.r=u,r.g=o,r.b=n;break;default:r.r=n,r.g=o,r.b=s}}return Pe(r.r>=0,"invalid red ".concat(r.r," for (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.g>=0,"invalid green ".concat(r.g," for (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.b>=0,"invalid blue ".concat(r.b," for (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.r<=256,"invalid red ".concat(r.r," for (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.g<=256,"invalid green ".concat(r.g," for (").concat(e,",").concat(t,",").concat(n,")")),Pe(r.b<=256,"invalid blue ".concat(r.b," for (").concat(e,",").concat(t,",").concat(n,")")),r}},{key:"toLab",value:function(e){for(var t=e.width,n=e.height,r=Me.Float32(t,n),a=Me.Float32(t,n),i=Me.Float32(t,n),c=r.imagePixels,o=a.imagePixels,s=i.imagePixels,u=e.data,l=0,h=0;h<t*n;h++){var f=u[l++],d=u[l++],b=u[l++],v=this.Rgb2Lab(f/255,d/255,b/255);c[h]=v.l,o[h]=v.a,s[h]=v.b}return[r,a,i]}},{key:"fromLab",value:function(e,t,n){for(var r=e.width,a=e.height,i={width:r,height:a,data:new Uint8Array(r*a*3)},c=i.data,o=e.imagePixels,s=t.imagePixels,u=n.imagePixels,l=0,h=0;h<r*a;h++){var f=o[h],d=s[h],b=u[h],v=this.Lab2Rgb(f,d,b);c[l++]=255*v.r,c[l++]=255*v.g,c[l++]=255*v.b}return i}},{key:"Rgb2Lab",value:function(e,t,n){var r=(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92))/.95047,a=(.2126*e+.7152*t+.0722*n)/1,i=(.0193*e+.1192*t+.9505*n)/1.08883;return r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,a:500*(r-a),b:200*(a-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))}}},{key:"Lab2Rgb",value:function(e,t,n){var r=(e+16)/116,a=t/500+r,i=r-n/200,c={r:3.2406*(a=.95047*(a*a*a>.008856?a*a*a:(a-16/116)/7.787))+-1.5372*(r=1*(r*r*r>.008856?r*r*r:(r-16/116)/7.787))+-.4986*(i=1.08883*(i*i*i>.008856?i*i*i:(i-16/116)/7.787)),g:-.9689*a+1.8758*r+.0415*i,b:.0557*a+-.204*r+1.057*i};return c.r=c.r>.0031308?1.055*Math.pow(c.r,1/2.4)-.055:12.92*c.r,c.g=c.g>.0031308?1.055*Math.pow(c.g,1/2.4)-.055:12.92*c.g,c.b=c.b>.0031308?1.055*Math.pow(c.b,1/2.4)-.055:12.92*c.b,c.r=Math.max(0,Math.min(1,c.r)),c.g=Math.max(0,Math.min(1,c.g)),c.b=Math.max(0,Math.min(1,c.b)),c}}]),e}(),Se=new ke.a,Re=function(){function e(t,n,r,a){Object(we.a)(this,e),this.canvas=null,this.bworker=null,this.timer=null,this.type=void 0,this.progress=void 0;var i=t.naturalWidth,c=t.naturalHeight,o=1024/i,s=1024/c,u=Math.min(o,s);u=Math.min(1,u);var l=Math.floor(i*u),h=Math.floor(c*u);n.width=l,n.height=h;var f=n.getContext("2d");f?(f.drawImage(t,0,0,i,c,0,0,l,h),this.canvas=n):console.error("unable to obtain canvas context"),this.type=r,this.progress=a}return Object(Oe.a)(e,[{key:"start",value:function(){var e=Object(xe.a)(pe.a.mark((function e(){var t,n=this;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=Object(xe.a)(pe.a.mark((function e(){var r,a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.timer=null,!n.canvas){e.next=12;break}if(null!=n.bworker){e.next=8;break}return n.progress(0,10),r=Le.toSeq(n.canvas),e.next=7,new Se.default(r,n.type);case 7:n.bworker=e.sent;case 8:return e.next=10,n.bworker.next();case 10:(a=e.sent).image&&(Le.fromSeq(a.image,n.canvas),n.timer=window.setTimeout(t,300),n.progress(a.current,a.total));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),null!=this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(t,300);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(xe.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.timer&&window.clearTimeout(this.timer),null==this.bworker){e.next=4;break}return e.next=4,this.bworker.stop();case 4:this.canvas=null,this.bworker=null,this.timer=null;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ae=Object(g.a)((function(e){return{mainDiv:{width:"100%",height:"100%"}}}));function Ne(e){var t=e.imagePath,n=Object(i.useState)(!0),r=Object(ce.a)(n,2),c=(r[0],r[1]),o=Object(i.useRef)(null),s=Object(i.useRef)(null),u=Object(i.useRef)(null),l=Ae(),h=Object(y.c)(L),f=Object(y.c)(q),d=Object(y.b)();Object(i.useEffect)((function(){if(o.current&&f&&u.current){var e=o.current.toDataURL("image/jpg").replace("image/png","image/octet-stream"),t=document.createElement("a");t.setAttribute("download","myImage.jpg"),t.setAttribute("href",e),t.click()}d(_(!1))}),[o,f,d]);var b=Object(i.useCallback)((function(e,t){d(J({current:e,total:t}))}),[d]);return Object(i.useEffect)((function(){if(null!==t){c(!0);var e=document.createElement("img");e.onload=function(t){var n=function(){o.current?(u.current=new Re(e,o.current,h,b),u.current.start(),c(!1)):console.error("canvas null when image received. THIS SHOULD NOT HAPPEN")};null!=u.current?u.current.stop().then(n):n()},e.src=t}}),[t,o,h,b]),Object(a.jsx)("div",{ref:s,className:l.mainDiv,children:Object(a.jsx)(me,{filename:t,children:Object(a.jsx)("canvas",{ref:o})})})}var De=Object(g.a)((function(e){return{root:{width:"100%",height:"100%",padding:"4px"},drop:{width:"100%",height:"100%",borderWidth:"2px",borderStyle:"dotted",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column","&:hover":{borderColor:e.palette.primary.dark},"& .AddIcn":{fontSize:80,color:e.palette.primary.light},"&:hover .AddIcn":{fontSize:80,color:e.palette.primary.dark},"& .text":{textAlign:"center",color:e.palette.primary.light},"&:hover .text":{textAlign:"center",color:e.palette.primary.dark}},noDisplay:{display:"none"}}})),Ie=[".jpg",".png",".jpeg"];function Fe(){var e=De(),t=Object(i.useState)(null),n=Object(ce.a)(t,2),r=n[0],c=n[1],o=Object(i.useCallback)((function(e){var t=e.filter((function(e){return Ie.some((function(t){var n;return null===(n=e.path)||void 0===n?void 0:n.toLowerCase().endsWith(t)}))}));if(t.length>0){var n=URL.createObjectURL(t[0]);c(n)}}),[]),s=Object(oe.a)({onDrop:o}),u=s.getRootProps,l=s.getInputProps,h=s.isDragActive;return Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)("div",Object(ie.a)(Object(ie.a)({},u()),{},{className:e.root,children:[Object(a.jsxs)("div",{className:h?e.drop:e.noDisplay,children:[Object(a.jsx)(he.a,{className:"AddIcn"}),Object(a.jsx)(w.a,{className:"text",children:"Drop the images here."})]}),null!==r?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Ne,{imagePath:r})}):Object(a.jsxs)("div",{className:e.drop,children:[Object(a.jsx)("input",Object(ie.a)({},l())),Object(a.jsx)(ue.a,{className:"AddIcn"}),Object(a.jsx)(w.a,{className:"text",children:"Drag and Drop here your image."}),Object(a.jsx)(w.a,{className:"text",children:"or click here to select the image to view."})]})]}))})}var Te=Object(s.a)({palette:{primary:b.a,secondary:{main:"#fff"},background:{default:"#fff"}}}),Ue=Object(l.a)((function(e){return Object(u.a)({app:{textAlign:"center"},main:{position:"absolute",top:"55px",right:"0px",left:"0px",bottom:"0px",background:"white",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(a.jsxs)(h.a,{theme:Te,children:[Object(a.jsx)(f.a,{}),Object(a.jsxs)("div",{className:t.app,children:[Object(a.jsx)(ne,{}),Object(a.jsx)("div",{className:t.main,children:Object(a.jsx)(Fe,{})}),Object(a.jsx)(j,{label:"version : ",forkme:!1,baseURL:"https://github.com/VittorioAccomazzi/Artist"})]})]})})),Be=Object(k.a)({reducer:{painter:S,download:Y,progress:$}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(y.a,{store:Be,children:Object(a.jsx)(Ue,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[92,1,2]]]);
//# sourceMappingURL=main.95b6a47d.chunk.js.map